"use strict";(self.webpackChunktheschoolster_in=self.webpackChunktheschoolster_in||[]).push([[584],{8584:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var t=a(5043),i=a(4858),r=a(8786),l=a(3401),c=a(9140),d=a(7032),n=a(9434),o=a(3047),m=a(579);function u(){const[e]=(0,t.useState)([{title_1:"ADD ROUTINE",title_2:"DELETE SELECTED ROUTINE",title_3:"EDIT ROUTINE",title_4:"ROUTINE",title_5:"ADD-MANAGE ROUTINE'S"}]),[s,a]=(0,t.useState)([]),[u,h]=(0,t.useState)([]),[j,x]=(0,t.useState)([]),[v,_]=(0,t.useState)([]),[b,N]=(0,t.useState)([]),[p,g]=(0,t.useState)([]),[f,R]=(0,t.useState)(0),[S,E]=(0,t.useState)([]),[T,y]=(0,t.useState)(!0),[k,w]=(0,t.useState)(!0),{register:q,handleSubmit:C,formState:{errors:D},setValue:I,reset:A}=(0,i.mN)(),[O]=(0,c.sZ)(),[G]=(0,c.Rx)(),[L]=(0,c.K)(),[B]=(0,c.Ej)(),[U,{data:F}]=(0,c.ad)(),[M]=(0,c.$G)(),[J,{data:H}]=(0,d.ad)(),[K,{data:P}]=(0,n.ad)(),[V,{data:Z}]=(0,o.ad)(),$=[{name:"#",selector:(e,s)=>s+1,width:"50px"},{name:"Routine Title",selector:e=>e.routine_name},{name:"Routine Teacher",selector:e=>e.routine_teacher},{name:"Routine Class",selector:e=>(0,m.jsxs)("div",{children:[e.class_data[0].class_name," - (",e.section_data[0].section_name,")"]})},{name:"Routine Subject",selector:e=>{var s;return null===(s=e.subject_data[0])||void 0===s?void 0:s.subject_name}},{name:"Routine Time",selector:e=>{var s;return(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{children:null===(s=e.routine_date)||void 0===s?void 0:s.split("T")[0]}),(0,m.jsxs)("b",{children:[e.routine_start_time,"-",e.routine_end_time]})]})}},{name:"Status",selector:e=>1===e.is_active?(0,m.jsx)("span",{className:"badge rounded-pill badge-success me-1",children:"Active"}):(0,m.jsx)("span",{className:"badge rounded-pill badge-danger me-1",children:"De-active"})},{name:"Action",selector:e=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("i",{className:"icofont icofont-ui-edit me-2 edit-link-custom",onClick:()=>{Q(e._id)},title:"Edit record"}),(0,m.jsx)("i",{className:"icofont icofont-ui-delete me-2 delete-link-custom",onClick:()=>{W(e._id),w(!0)},title:"Delete record"})]})}],z=()=>{A(),R(0),document.getElementById("close-modal").click(),w(!1)},Q=async e=>{R(e),document.getElementById("open-modal").click(),M(e).then((e=>{I("routine_name",e.data.data.routine_name),I("routine_class",e.data.data.routine_class),I("routine_teacher",e.data.data.routine_teacher),I("routine_room",e.data.data.routine_room),I("routine_date",e.data.data.routine_date),I("routine_start_time",e.data.data.routine_start_time),I("routine_end_time",e.data.data.routine_end_time),I("is_active",e.data.data.is_active),X(),setTimeout((()=>{I("routine_section",e.data.data.routine_section),I("routine_subject",e.data.data.routine_subject)}),300)})).catch((e=>{l.oR.error("Error : ".concat(e.message)),w(!1)}))},W=async e=>{!0===window.confirm("Are you sure to delete this record?")&&L(e).then((e=>{var s;null!==e&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.status?(l.oR.success(e.data.message),w(!1)):l.oR.error(e.error.data.message)})).catch((e=>{l.oR.error("Error : ".concat(e.message))}))};(0,t.useEffect)((()=>{U().then((e=>{var s;a(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.data),w(!1)})).catch((e=>{l.oR.error("Error : ".concat(e.message))}))}),[F]);(0,t.useEffect)((()=>{J().then((e=>{var s;h(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.data),w(!1)})).catch((e=>{l.oR.error("Error : ".concat(e.message))}))}),[H]);const X=()=>{const e=document.getElementById("classSelectBox"),s=e.options[e.selectedIndex].id,a=JSON.parse(s);x(a.class_section),_(a.class_subject)};return(0,t.useEffect)((()=>{K().then((e=>{var s;g(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.data),w(!1)})).catch((e=>{l.oR.error("Error : ".concat(e.message))}))}),[P]),(0,t.useEffect)((()=>{V().then((e=>{var s;N(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.data),w(!1)})).catch((e=>{l.oR.error("Error : ".concat(e.message))}))}),[Z]),(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"page-body",children:[k?(0,m.jsx)("div",{class:"loader-wrapper",children:(0,m.jsx)("div",{class:"theme-loader",children:(0,m.jsx)("div",{class:"loader-p"})})}):"",(0,m.jsx)("div",{className:"container-fluid",children:(0,m.jsx)("div",{className:"page-title",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-sm-6 ps-0",children:(0,m.jsx)("h3",{children:e[0].title_1})}),(0,m.jsx)("div",{className:"col-sm-6 pe-0",children:(0,m.jsxs)("ol",{className:"breadcrumb",children:[(0,m.jsx)("li",{className:"breadcrumb-item",children:(0,m.jsx)("a",{href:"#",children:(0,m.jsx)("svg",{className:"stroke-icon",children:(0,m.jsx)("use",{href:"../assets/svg/icon-sprite.svg#stroke-home"})})})}),(0,m.jsx)("li",{className:"breadcrumb-item active",children:e[0].title_1})]})})]})})}),(0,m.jsx)("div",{className:"container-fluid",children:(0,m.jsx)("div",{className:"row",children:(0,m.jsx)("div",{className:"col-sm-12",children:(0,m.jsx)("div",{className:"card",children:(0,m.jsxs)("div",{className:"card-body custom-card-list",children:[(0,m.jsx)("div",{className:"list-product-header",children:(0,m.jsxs)("div",{children:[T?"":(0,m.jsx)("button",{className:"btn btn-danger-gradien btn-sm",type:"button",onClick:()=>{(async()=>{!0===window.confirm("Are you sure to delete this record?")&&B(S).then((e=>{var s;null!==e&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.status?(l.oR.success(e.data.message),w(!1),y(!0)):l.oR.error(e.error.data.message)})).catch((e=>{l.oR.error("Error : ".concat(e.message))}))})(),w(!0)},disabled:T,children:(0,m.jsxs)("b",{children:[(0,m.jsx)("i",{className:"fa fa-minus"}),"\xa0 ",e[0].title_2]})}),(0,m.jsx)("button",{className:"btn btn-primary-gradien btn-sm",type:"button","data-bs-toggle":"modal","data-bs-target":".bd-example-modal-fullscreen",id:"open-modal",onClick:()=>A(),children:(0,m.jsxs)("b",{children:[(0,m.jsx)("i",{className:"fa fa-plus"}),"\xa0 ",e[0].title_1]})})]})}),(0,m.jsx)("div",{className:"list-product",children:(0,m.jsx)(r.Ay,{columns:$,data:s,pagination:!0,selectableRows:!0,onSelectedRowsChange:e=>{let{selectedRows:s}=e;y(!0);let a=[];s.map((e=>{a.push(e._id)})),a.length>0&&y(!1),E(a)},persistTableHead:!0})})]})})})})}),(0,m.jsx)("div",{className:"modal fade bd-example-modal-fullscreen",tabindex:"-1",role:"dialog","aria-labelledby":"myFullLargeModalLabel","aria-hidden":"true",children:(0,m.jsx)("div",{className:"modal-dialog modal-fullscreen",children:(0,m.jsxs)("div",{className:"modal-content",children:[(0,m.jsxs)("div",{className:"modal-header",children:[(0,m.jsx)("h4",{className:"modal-title",id:"myFullLargeModalLabel",children:e[0].title_5}),(0,m.jsx)("button",{className:"btn-close py-1",type:"button","data-bs-dismiss":"modal","aria-label":"Close",id:"close-modal",onClick:()=>{R(0)}})]}),(0,m.jsx)("div",{className:"modal-body dark-modal",children:(0,m.jsx)("div",{className:"row border-dark",children:(0,m.jsx)("div",{className:"col-sm-12",children:(0,m.jsx)("div",{className:"card",children:(0,m.jsx)("div",{className:"card-body",children:(0,m.jsx)("form",{method:"POST",onSubmit:C((e=>{0===f?(O(e).then((e=>{var s;null!==e&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.status?l.oR.success(e.data.message):l.oR.error(e.error.data.message)})).catch((e=>{l.oR.error("Error : ".concat(e.message))})),z()):(G({dataID:f,...e}).then((e=>{var s;null!==e&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.status?l.oR.success(e.data.message):l.oR.error(e.error.data.message)})).catch((e=>{l.oR.error("Error : ".concat(e.message)),w(!1)})),z())})),encType:"multipart/form-data",children:(0,m.jsxs)("div",{className:"form theme-form-old",children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("label",{children:"Routine Teacher"}),(0,m.jsxs)("select",{className:"form-select",id:"floatingSelectGrid",...q("routine_teacher",{required:"This field is required."}),children:[(0,m.jsx)("option",{value:"",children:"Select Teacher"}),p?p.map(((e,s)=>(0,m.jsx)("option",{value:e._id,children:e.teacher_name},s))):""]}),D.routine_teacher&&(0,m.jsx)("span",{className:"error-message",children:D.routine_teacher.message})]})}),(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("label",{children:"Routine Class"}),(0,m.jsxs)("select",{className:"form-select",...q("routine_class",{required:"This field is required."}),onChange:e=>{X(e.target.value)},id:"classSelectBox",children:[(0,m.jsx)("option",{value:"",children:"Select Class"}),u?u.map(((e,s)=>(0,m.jsx)("option",{id:JSON.stringify(e),value:e._id,children:e.class_name},s))):""]}),D.routine_class&&(0,m.jsx)("span",{className:"error-message",children:D.routine_class.message})]})}),(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("label",{children:"Routine Section"}),(0,m.jsxs)("select",{className:"form-select",id:"floatingSelectGrid",...q("routine_section",{required:"This field is required."}),children:[(0,m.jsx)("option",{value:"",children:"Select Section"}),j?j.map(((e,s)=>(0,m.jsx)("option",{value:e._id,children:e.section_name},s))):""]}),D.routine_section&&(0,m.jsx)("span",{className:"error-message",children:D.routine_section.message})]})}),(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("label",{children:"Routine Subject"}),(0,m.jsxs)("select",{className:"form-select",id:"floatingSelectGrid",...q("routine_subject",{required:"This field is required."}),children:[(0,m.jsx)("option",{value:"",children:"Select Subject"}),v?v.map(((e,s)=>(0,m.jsx)("option",{value:e._id,children:null===e||void 0===e?void 0:e.subject_name},s))):""]}),D.routine_subject&&(0,m.jsx)("span",{className:"error-message",children:D.routine_subject.message})]})}),(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("label",{children:"Routine Date"}),(0,m.jsx)("input",{className:"form-control",type:"date",...q("routine_date",{required:"This field is required."})}),D.routine_date&&(0,m.jsx)("span",{className:"error-message",children:D.routine_date.message})]})}),(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("label",{children:"Routine Start Time"}),(0,m.jsx)("input",{className:"form-control",type:"time",...q("routine_start_time",{required:"This field is required."})}),D.routine_start_time&&(0,m.jsx)("span",{className:"error-message",children:D.routine_start_time.message})]})}),(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("label",{children:"Routine End Time"}),(0,m.jsx)("input",{className:"form-control",type:"time",...q("routine_end_time",{required:"This field is required."})}),D.routine_end_time&&(0,m.jsx)("span",{className:"error-message",children:D.routine_end_time.message})]})}),(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("label",{children:"Routine Title"}),(0,m.jsx)("input",{className:"form-control",type:"text",placeholder:"Routine Title",...q("routine_name",{required:"This field is required."})}),D.routine_name&&(0,m.jsx)("span",{className:"error-message",children:D.routine_name.message})]})}),(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("label",{children:"Routine Room"}),(0,m.jsxs)("select",{className:"form-select",id:"floatingSelectGrid",...q("routine_room",{required:"This field is required."}),children:[(0,m.jsx)("option",{value:"",children:"Select room"}),b?b.map(((e,s)=>(0,m.jsx)("option",{value:e._id,children:e.room_name},s))):""]}),D.routine_room&&(0,m.jsx)("span",{className:"error-message",children:D.routine_room.message})]})}),(0,m.jsx)("div",{className:"col-md-12",children:(0,m.jsxs)("div",{className:"form-check form-switch",children:[(0,m.jsx)("input",{className:"form-check-input",id:"flexSwitchCheckDefault",type:"checkbox",role:"switch",...q("is_active",{required:!1})}),(0,m.jsx)("label",{className:"form-check-label",for:"flexSwitchCheckDefault",children:"Is Active"})]})})]}),(0,m.jsx)("div",{className:"row",children:(0,m.jsx)("div",{className:"col",children:(0,m.jsxs)("div",{className:"text-end",children:[(0,m.jsx)("button",{type:"submit",className:"btn btn-success-gradien border-dark me-3",children:(0,m.jsx)("b",{children:"Add"})}),(0,m.jsx)("button",{type:"reset",className:"btn btn-danger-gradien border-dark",children:(0,m.jsx)("b",{children:"Reset"})})]})})})]})})})})})})})]})})})]})})}}}]);
//# sourceMappingURL=584.a7315ce9.chunk.js.map